angular.module("casino-lights",[]),angular.module("casino-lights").directive("casinoLights",["$timeout","$q","$filter","casino.font-service",function(t,o,e,n){function l(o,l,f,i,r){function a(){e(o.config.filter)(o.word,u++),c()}function c(){o.config.power&&(o.animatePromise=t(a,o.config.speed))}function m(){u=0,t.cancel(o.animatePromise),angular.forEach(o.word,function(t){angular.forEach(t.lights,function(t){t.power=!1},this)})}var u=0;o.config=angular.extend({speed:100,filter:"random",power:!0,letters:r().text(),font:window.getComputedStyle(l[0]).getPropertyValue("font-family").split(",")[0].replace(/"/g,"").toLowerCase()},o.config),o.word=[],n.fetch(o.config,function(t){return angular.forEach(o.config.letters,function(e){o.word.push({"char":e,lights:angular.copy(t[e])})})}),o.$watch("config.filter",function(){o.animatePromise&&m(),c()}),o.$watch("config.power",function(t,o){t&&!o?c():!t&&o&&m()}),l.on("$destroy",function(){t.cancel(o.animatePromise)})}function f(){return['<span ng-repeat="letter in word track by $index" data-content="{{letter.char}}">',"{{letter.char}}",'<i ng-repeat="light in letter.lights" class="light" ng-class="{on:light.power}"',"    ng-style=\"{'left':light.left + '%', 'bottom':light.bottom + '%'}\">","</i>","</span>"].join("")}return{restrict:"A",scope:{text:"@",config:"=?"},link:l,transclude:!0,template:f}}]),angular.module("casino-lights").config(["$filterProvider","$provide",function(t,o){var e=t.register,n=[];t.register=function(t,o){n.push(t),e(t,o)},o.value("filters",n)}]),angular.module("casino-lights").filter("letter",function(){return function(t,o){var e=8,n=Math.floor(o%(t.length*e)/e),l=t[n],f=n>0?t[n-1]:t[t.length-1];angular.forEach(l.lights,function(t){t.power=!0},this),angular.forEach(f.lights,function(t){t.power=!1},this)}}),angular.module("casino-lights").filter("random",function(){return function(t,o){o%8===0&&angular.forEach(t,function(t){angular.forEach(t.lights,function(t){t.power=Math.random()>.5?!0:!1},this)},this)}}),angular.module("casino-lights").filter("vertical",function(){return function(t,o){var e=100,n=3,l=o%e,f=Math.round(l/e)?!1:!0,i=l*n,r=e+(50-l)*n;angular.forEach(t,function(t){angular.forEach(t.lights,function(t){f&&t.bottom<i&&(t.power=!0),!f&&t.bottom>r&&(t.power=!1)},this)},this)}}),angular.module("casino-lights").service("casino.font-service",["$q","$injector",function(t,o){this.fetch=function(t,e){try{return e(o.get("casino."+t.font))}catch(n){throw"Font data not found for font:"+t.font+",\nPlease check data file exists: http://github.com/thatguynamedandy/angular-casino-lights"}}}]),angular.module("casino-lights").factory("casino.raleway",function(){return{A:[{bottom:32,left:50},{bottom:32,left:24},{bottom:32,left:76},{bottom:52,left:31},{bottom:52,left:69},{bottom:12,left:16},{bottom:12,left:84},{bottom:71,left:38},{bottom:71,left:62},{bottom:90,left:50}],B:[],C:[{bottom:50,left:16},{bottom:8,left:55},{bottom:93,left:55},{bottom:30,left:20},{bottom:16,left:33},{bottom:16,left:78},{bottom:84,left:78},{bottom:70,left:20},{bottom:86,left:33}],D:[],E:[],F:[],G:[],H:[],I:[{bottom:10,left:50},{bottom:30,left:50},{bottom:50,left:50},{bottom:70,left:50},{bottom:90,left:50}],J:[],K:[],L:[],M:[],N:[{bottom:10,left:18},{bottom:30,left:18},{bottom:50,left:18},{bottom:70,left:18},{bottom:90,left:18},{bottom:30,left:65},{bottom:50,left:50},{bottom:70,left:36},{bottom:10,left:82},{bottom:30,left:82},{bottom:50,left:82},{bottom:70,left:82},{bottom:90,left:82}],O:[{bottom:8,left:50},{bottom:14,left:31},{bottom:30,left:18},{bottom:50,left:14},{bottom:70,left:18},{bottom:86,left:30},{bottom:92,left:50},{bottom:14,left:69},{bottom:30,left:82},{bottom:50,left:86},{bottom:70,left:82},{bottom:86,left:70}],P:[],Q:[],R:[],S:[{bottom:13,left:23},{bottom:7,left:50},{bottom:50,left:50},{bottom:93,left:50},{bottom:88,left:74},{bottom:84,left:23},{bottom:60,left:24},{bottom:16,left:77},{bottom:40,left:78}],T:[],U:[],V:[],W:[],X:[],Y:[],Z:[]}});