angular.module("casino-lights",[]),angular.module("casino-lights").directive("casino-lights",["$timeout","$q","$filter","casino.font-service",function(t,n,o,i){function e(n,e){function a(){o(n.config.filter)(n.word,u++),c()}function c(){n.config.on&&(n.animatePromise=t(a,n.config.speed.max+n.config.speed.min-n.config.speed.current))}var l=r.split(""),s=window.getComputedStyle(e[0]).getPropertyValue("font-family").split(",")[0].toLowerCase(),u=0;n.config=angular.extend({speed:{min:50,max:200,current:100},filter:"vertical"},n.config),n.word=[],i.fetch(s,l,function(t){return angular.forEach(l,function(o){n.word.push({"char":o,lights:t[o]})})}),n.$watch("config.on",function(t,n){t===!0&&n===!1&&c()}),e.on("$destroy",function(){t.cancel(n.animatePromise)}),c()}function a(t){return r=t.text(),['<span ng-repeat="letter in word track by $index" data-content="{{letter.char}}">',"{{letter.char}}",'<i ng-repeat="light in letter.lights" class="light" ng-class="{on:light.power}"','    style="left:{{light.left}};bottom:{{light.bottom}}">',"</i>","</span>"].join("")}var r;return{restrict:"A",scope:{config:"="},link:e,template:a}}]),angular.module("casino-lights").config(function(t,n){var o=t.register,i=[];t.register=function(t,n){i.push(t),o(t,n)},n.value("filters",i)}),angular.module("casino-lights").filter("letter",function(){return function(t,n){var o=8,i=Math.floor(n%(t.length*o)/o),e=t[i],a=i>0?t[i-1]:t[t.length-1];angular.forEach(e.lights,function(t){t.power=!0},this),angular.forEach(a.lights,function(t){t.power=!1},this)}}),angular.module("casino-lights").filter("random",function(){return function(t,n){n%8===0&&angular.forEach(t,function(t){angular.forEach(t.lights,function(t){t.power=Math.random()>.5?!0:!1},this)},this)}}),angular.module("casino-lights").filter("vertical",function(){return function(t,n){var o=100,i=3,e=n%o,a=Math.round(e/o)?!1:!0,r=e*i,c=o+(50-e)*i;angular.forEach(t,function(t){angular.forEach(t.lights,function(t){a&&parseInt(t.bottom,10)<r&&(t.power=!0),!a&&parseInt(t.bottom,10)>c&&(t.power=!1)},this)},this)}}),angular.module("casino-lights").service("casino.font-service",["$q","$http","$injector","$log",function(t,n,o,i){this.fetch=function(t,e,a){try{return a(o.get("casino."+t))}catch(r){i.info("Asyncronously Loading data for "+t+": Recommended that you bootstrap data into page"),n({method:"GET",url:"bower_components/angular-casino-lights/data/"+t+".json",cache:!0}).success(a).error(function(){throw"Font data not found for font:"+t+",\nPlease check data file exists: http://github.com/thatguynamedandy/angular-casino-lights"})}}}]);